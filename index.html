<!doctype html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,700;1,400&family=Nunito+Sans:wght@700&family=Open+Sans:wght@300&display=swap" rel="stylesheet">
        <script>
            const latArray = [34.0346104,34.034942,34.035375,34.03563,34.035394,34.03527,34.034983,34.034826,34.034561,34.034462,34.02055611]
            const longArray = [-118.2416855,-118.241651,-118.241322,-118.2414,-118.241746,-118.241627,-118.241988,-118.241955,-118.242386,-118.241899,-118.303161]
            const idArray = ["#text1","#text2","#text3","#text4","#text5","#text6","#text7","#text8","#text9","#text10","#text11"]
            // const imgArray ["assets/asset.jpeg"]
            const locNameArray = ["Info Booth","Drinks","Seafood","Beer Garden","Dessert","Shopping","Vegan","Tacos","Restrooms","Shopping","Chris's House"]
            function getDistance(lat1, lon1, lat2, lon2) {
              const R = 6371; // Radius of the earth in km
              const dLat = deg2rad(lat2 - lat1); // deg2rad below
              const dLon = deg2rad(lon2 - lon1); 
              const a = 
                Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(deg2rad(lat1)) * Math.cos(deg2rad(lat2)) * 
                Math.sin(dLon/2) * Math.sin(dLon/2)
                ; 
              const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
              const d = R * c; // Distance in km
              return d;
            }

            function deg2rad(deg) {
              return deg * (Math.PI/180)
            }
          function updateDistance() {
            for (let i = 0; i < latArray.length-1; i++) {
                if (navigator.geolocation) {
                  navigator.geolocation.getCurrentPosition(function(position) {
                    var latitude = position.coords.latitude;
                    var longitude = position.coords.longitude;
                    console.log("Latitude: " + latitude + ", Longitude: " + longitude);
                    lat = latArray[i]
                    long = longArray[i]
                    console.log(lat); // Output: "34.02055611"
                    console.log(long); // Output: "-118.303161"

                    distance = getDistance(latitude,longitude,lat,long)*1000
                    console.log(distance)
                    document.querySelector(idArray[i]).setAttribute("value", `${locNameArray[i]} \nDistance: ${distance.toFixed(2)}m`);
                  });
                } else {
                  console.log("Geolocation is not supported by this browser.");
                }
            }
          }
          setInterval(updateDistance, 100);
        </script>
    </head>

   <body style="margin: 0; overflow: hidden;">
        <div style="height: 50px; background: #4051c6; border: none;margin: auto; width: 50%; padding: 10px;">
            <h3 style="text-align: center; size: 40px; color: #f4e3d0; font-weight: bold; font-family: Helvetica, sans-serif;">Smorgasburg VR Experience</h3>
        </div>
        <div id="myEmbeddedScene" style="height: 60vh">
            <!-- loading-screen="dotsColor: red; backgroundColor: black" -->
            <a-scene embedded loading-screen="enabled: false;"
            arjs="sourceType: webcam; debugUIEnabled: false;"
            >
                <!-- Location 1 -->
                <a-image
                    src="assets/icon_info-01.png"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.0346104; longitude: -118.2416855;"
                ></a-image>
                </a-entity>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text1"
                    value="Distance: 100m"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.0346104; longitude: -118.2416855;"
                ></a-text>
                </a-entity>
                <!-- Location 2 -->
                <a-image
                    position="-10 0 0"
                    src="assets/icon_coffee-01.png"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.034942; longitude: -118.241651;"
                ></a-image>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text2"
                    value="Distance: 100m"
                    position="10 0 0"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.034942; longitude: -118.241651;"
                ></a-text>
                </a-entity>
                <!-- Location 3 -->
                <a-image
                    src="assets/icon_lobster-01.png"
                    look-at="[gps-camera]"
                    scale="1 1 1"
                    gps-entity-place="latitude: 34.035375; longitude: -118.241322;"
                ></a-image>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text3"
                    value="Distance: 100m"
                    position="0 0.001 0"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.035375; longitude: -118.241322;"
                ></a-text>
                </a-entity>
                <!-- Location 4 -->
                <a-image
                    src="assets/icon_beer-01.png"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.03563; longitude: -118.2414;"
                ></a-image>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text4"
                    value="Distance: 100m"
                    position="15 0 0"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.03563; longitude: -118.2414;"
                ></a-text>
                </a-entity>
                <!-- Location 5 -->
                <a-image
                    src="assets/icon_popsicle-01.png"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.035394; longitude: -118.241746;"
                ></a-image>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text5"
                    value="Distance: 100m"
                    position="15 0 0"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.035394; longitude: -118.241746;"
                ></a-text>
                </a-entity>
                <!-- Location 6 -->
                <a-image
                    src="assets/icon_shoppingbag-01.png"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.03527; longitude: -118.241627;"
                ></a-image>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text6"
                    value="Distance: 100m"
                    position="15 0 0"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.03527; longitude: -118.241627;"
                ></a-text>
                </a-entity>
                <!-- Location 7 -->
                <a-image
                    src="assets/icon_vegan-01.png"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.034983; longitude: -118.241988;"
                ></a-image>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text7"
                    value="Distance: 100m"
                    position="15 0 0"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.034983; longitude: -118.241988;"
                ></a-text>
                </a-entity>
                <!-- Location 8 -->
                <a-image
                    src="assets/icon_taco-01.png"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.034826; longitude: -118.241955;"
                ></a-image>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text8"
                    value="Distance: 100m"
                    position="15 0 0"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.034826; longitude: -118.241955;"
                ></a-text>
                </a-entity>
                <!-- Location 9 -->
                <a-image
                    src="assets/icon_restroom-01.png"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.034561; longitude: -118.242386;"
                ></a-image>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text9"
                    value="Distance: 100m"
                    position="15 0 0"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.034561; longitude: -118.242386;"
                ></a-text>
                </a-entity>
                <!-- Location 10 -->
                <a-image
                    src="assets/icon_shoppingbag-01.png"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.034462; longitude: -118.241899;"
                ></a-image>
                <a-entity position="-5 -5 0">
                <a-text
                    id = "text10"
                    value="Distance: 100m"
                    position="15 0 0"
                    color = "#f4e3d0"
                    scale = "5 5 5"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.034462; longitude: -118.241899;"
                ></a-text>
                </a-entity>
                <!-- chris's house -->
                <!-- <a-image
                    src="assets/asset.jpeg"
                    position="0 0 0"
                    look-at="[gps-camera]"
                    scale="5 5 5"
                    gps-entity-place="latitude: 34.02055611; longitude: -118.303161;"
                ></a-image>
                <a-text
                    id = "text11"
                    value="Distance: 100m"
                    position="15 0 0"
                    color = "#f4e3d0"
                    scale = "2 2 2"
                    look-at="[gps-camera]"
                    gps-entity-place="latitude: 34.02055611; longitude: -118.303161;"
                ></a-text> -->
            <a-camera gps-camera rotation-reader></a-camera>
        </a-scene>
        </div>
    </body>
</html>